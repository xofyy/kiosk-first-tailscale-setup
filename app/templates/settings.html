{% extends "base.html" %}

{% block title %}Ayarlar - Kiosk Setup Panel{% endblock %}

{% block content %}
<div class="settings-page">
    <h2 class="page-title">Ayarlar</h2>
    
    <form id="settings-form" class="settings-form">
        <!-- Ekran AyarlarÄ± -->
        <section class="settings-section">
            <h3 class="section-title">Ekran AyarlarÄ±</h3>
            
            <div class="form-grid">
                <div class="form-group">
                    <label>Kiosk URL</label>
                    <input type="url" name="kiosk.url" class="form-control" 
                           value="{{ config.kiosk.url }}">
                    <small class="text-muted">Kiosk modunda aÃ§Ä±lacak URL</small>
                </div>
                
                <div class="form-group">
                    <label>Ekran Rotasyonu</label>
                    <select name="kiosk.rotation" class="form-control">
                        <option value="normal" {% if config.kiosk.rotation == 'normal' %}selected{% endif %}>Normal</option>
                        <option value="right" {% if config.kiosk.rotation == 'right' %}selected{% endif %}>SaÄŸ (90Â°)</option>
                        <option value="left" {% if config.kiosk.rotation == 'left' %}selected{% endif %}>Sol (270Â°)</option>
                        <option value="inverted" {% if config.kiosk.rotation == 'inverted' %}selected{% endif %}>Ters (180Â°)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>GRUB Rotasyonu</label>
                    <select name="kiosk.grub_rotation" class="form-control">
                        <option value="0" {% if config.kiosk.grub_rotation == 0 %}selected{% endif %}>0 - Normal</option>
                        <option value="1" {% if config.kiosk.grub_rotation == 1 %}selected{% endif %}>1 - SaÄŸ</option>
                        <option value="2" {% if config.kiosk.grub_rotation == 2 %}selected{% endif %}>2 - Ters</option>
                        <option value="3" {% if config.kiosk.grub_rotation == 3 %}selected{% endif %}>3 - Sol</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- Touch AyarlarÄ± -->
        <section class="settings-section">
            <h3 class="section-title">Touch AyarlarÄ±</h3>
            
            <div class="form-grid">
                <div class="form-group">
                    <label>Touch Vendor ID</label>
                    <input type="text" name="kiosk.touch_vendor_id" class="form-control" 
                           value="{{ config.kiosk.touch_vendor_id }}">
                    <small class="text-muted">USB Vendor:Product ID (Ã¶rn: 222a:0001)</small>
                </div>
                
                <div class="form-group">
                    <label>Touch Matrix</label>
                    <input type="text" name="kiosk.touch_matrix" class="form-control" 
                           value="{{ config.kiosk.touch_matrix }}">
                    <small class="text-muted">Koordinat dÃ¶nÃ¼ÅŸÃ¼m matrisi</small>
                </div>
            </div>
        </section>

        <!-- AÄŸ AyarlarÄ± -->
        <section class="settings-section">
            <h3 class="section-title">AÄŸ AyarlarÄ±</h3>
            
            <div class="form-grid">
                <div class="form-group">
                    <label>DNS SunucularÄ±</label>
                    <input type="text" name="network.dns_servers" class="form-control" 
                           value="{{ config.network.dns_servers | join(', ') }}"
                           {% if module_statuses.network == 'completed' %}disabled{% endif %}>
                    <small class="text-muted">VirgÃ¼lle ayÄ±rÄ±n (Ã¶rn: 8.8.8.8, 8.8.4.4)</small>
                    {% if module_statuses.network == 'completed' %}
                    <span class="locked-badge">ðŸ”’ Network modÃ¼lÃ¼ kurulduÄŸu iÃ§in kilitli</span>
                    {% endif %}
                </div>
            </div>
        </section>

        <!-- NVIDIA AyarlarÄ± -->
        <section class="settings-section">
            <h3 class="section-title">NVIDIA AyarlarÄ±</h3>
            
            <div class="form-grid">
                <div class="form-group">
                    <label>Driver SÃ¼rÃ¼mÃ¼</label>
                    <select name="nvidia.driver_version" class="form-control"
                            {% if module_statuses.nvidia == 'completed' %}disabled{% endif %}>
                        <option value="535" {% if config.nvidia.driver_version == '535' %}selected{% endif %}>535 (Ã–nerilen)</option>
                        <option value="545" {% if config.nvidia.driver_version == '545' %}selected{% endif %}>545</option>
                        <option value="550" {% if config.nvidia.driver_version == '550' %}selected{% endif %}>550</option>
                    </select>
                    {% if module_statuses.nvidia == 'completed' %}
                    <span class="locked-badge">ðŸ”’ NVIDIA modÃ¼lÃ¼ kurulduÄŸu iÃ§in kilitli</span>
                    {% endif %}
                </div>
            </div>
        </section>

        <!-- Servis AyarlarÄ± -->
        <section class="settings-section">
            <h3 class="section-title">Servis AyarlarÄ±</h3>
            
            <div class="form-grid">
                <div class="form-group">
                    <label>VNC Port</label>
                    <input type="number" name="vnc.port" class="form-control" 
                           value="{{ config.vnc.port }}"
                           {% if module_statuses.vnc == 'completed' %}disabled{% endif %}>
                    {% if module_statuses.vnc == 'completed' %}
                    <span class="locked-badge">ðŸ”’ VNC modÃ¼lÃ¼ kurulduÄŸu iÃ§in kilitli</span>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label>Cockpit Port</label>
                    <input type="number" name="cockpit.port" class="form-control" 
                           value="{{ config.cockpit.port }}"
                           {% if module_statuses.cockpit == 'completed' %}disabled{% endif %}>
                    {% if module_statuses.cockpit == 'completed' %}
                    <span class="locked-badge">ðŸ”’ Cockpit modÃ¼lÃ¼ kurulduÄŸu iÃ§in kilitli</span>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label>netmon Yazma AralÄ±ÄŸÄ± (sn)</label>
                    <input type="number" name="netmon.db_write_interval" class="form-control" 
                           value="{{ config.netmon.db_write_interval }}">
                </div>
                
                <div class="form-group">
                    <label>netmon Veri Saklama (gÃ¼n)</label>
                    <input type="number" name="netmon.retention_days" class="form-control" 
                           value="{{ config.netmon.retention_days }}">
                </div>
                
                <div class="form-group">
                    <label>collector AralÄ±ÄŸÄ± (sn)</label>
                    <input type="number" name="collector.interval" class="form-control" 
                           value="{{ config.collector.interval }}">
                </div>
            </div>
        </section>

        <!-- Docker AyarlarÄ± -->
        <section class="settings-section">
            <h3 class="section-title">Docker AyarlarÄ±</h3>
            
            <div class="form-grid">
                <div class="form-group">
                    <label>Compose Path</label>
                    <input type="text" name="docker.compose_path" class="form-control" 
                           value="{{ config.docker.compose_path }}"
                           {% if module_statuses.docker == 'completed' %}disabled{% endif %}>
                    {% if module_statuses.docker == 'completed' %}
                    <span class="locked-badge">ðŸ”’ Docker modÃ¼lÃ¼ kurulduÄŸu iÃ§in kilitli</span>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label>MongoDB Data Path</label>
                    <input type="text" name="mongodb.data_path" class="form-control" 
                           value="{{ config.mongodb.data_path }}"
                           {% if module_statuses.docker == 'completed' %}disabled{% endif %}>
                </div>
                
                <div class="form-group">
                    <label>MongoDB Tag</label>
                    <input type="text" name="mongodb.tag" class="form-control" 
                           value="{{ config.mongodb.tag }}">
                </div>
            </div>
        </section>

        <!-- Registry AyarlarÄ± -->
        <section class="settings-section">
            <h3 class="section-title">Registry AyarlarÄ±</h3>
            
            <div class="form-grid">
                <div class="form-group">
                    <label>Registry URL</label>
                    <input type="text" name="registry.url" class="form-control" 
                           value="{{ config.registry.url }}">
                </div>
                
                <div class="form-group">
                    <label>KullanÄ±cÄ± AdÄ±</label>
                    <input type="text" name="registry.username" class="form-control" 
                           value="{{ config.registry.username }}">
                </div>
                
                <div class="form-group">
                    <label>Åžifre</label>
                    <input type="password" name="registry.password" class="form-control" 
                           value="{{ config.registry.password }}">
                </div>
            </div>
        </section>

        <!-- Åžifreler -->
        <section class="settings-section">
            <h3 class="section-title">Åžifreler</h3>
            
            <div class="form-grid">
                <div class="form-group">
                    <label>Kiosk KullanÄ±cÄ± Åžifresi</label>
                    <input type="password" name="passwords.kiosk" class="form-control" 
                           value="{{ config.passwords.kiosk }}">
                </div>
                
                <div class="form-group">
                    <label>VNC Åžifresi</label>
                    <input type="password" name="passwords.vnc" class="form-control" 
                           value="{{ config.passwords.vnc }}">
                </div>
                
                <div class="form-group">
                    <label>MOK Åžifresi</label>
                    <input type="password" name="passwords.mok" class="form-control" 
                           value="{{ config.passwords.mok }}">
                    <small class="text-muted">Secure Boot MOK key ÅŸifresi</small>
                </div>
            </div>
        </section>

        <!-- Kaydet Butonu -->
        <div class="form-actions">
            <button type="submit" class="btn btn-primary btn-lg">AyarlarÄ± Kaydet</button>
            <button type="button" class="btn btn-secondary" onclick="location.reload()">Ä°ptal</button>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/settings.js') }}"></script>
{% endblock %}
