{% extends "base.html" %}

{% block title %}Logs - ACO Maintenance Panel{% endblock %}

{% block content %}
<div class="logs-page">
    <div class="logs-header">
        <h2 class="page-title">System Logs</h2>
        <div class="logs-actions">
            <select id="module-select" class="select-input" onchange="changeModule(this.value)">
                <option value="">All Logs (main.log)</option>
                {% for mod in available_modules %}
                <option value="{{ mod }}" {% if mod == current_module %}selected{% endif %}>
                    {{ mod | capitalize }}
                </option>
                {% endfor %}
            </select>
            <button class="btn btn-secondary" onclick="refreshLogs()">Refresh</button>
            <label class="checkbox-label">
                <input type="checkbox" id="auto-refresh" checked>
                Auto refresh
            </label>
            <label class="checkbox-label">
                <input type="checkbox" id="auto-scroll" checked>
                Auto scroll
            </label>
        </div>
    </div>

    <div class="logs-container" id="logs-container" data-module="{{ current_module }}" data-from-install="{{ 'true' if request.args.get('from') == 'install' else 'false' }}">
        <pre class="logs-content" id="logs-content">{% for line in logs %}{{ line }}{% endfor %}</pre>
    </div>

    <div class="logs-footer">
        <span id="log-status">{{ logs|length }} lines shown</span>
        <span id="last-update">Last update: now</span>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/logs.js') }}"></script>
{% endblock %}
